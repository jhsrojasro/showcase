<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Facemesh with Webcam Demo #  Facemesh is a machine-learning model that allows for facial landmark detection in the browser. It can detect multiple faces at once and provides 486 3D facial landmarks that describe the geometry of each face. Facemesh works best when the faces in view take up a large percentage of the image or video frame and it may struggle with small/distant faces.
https://learn.ml5js.org/#/reference/facemesh"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Facemesh with Webcam Demo #  Facemesh is a machine-learning model that allows for facial landmark detection in the browser. It can detect multiple faces at once and provides 486 3D facial landmarks that describe the geometry of each face. Facemesh works best when the faces in view take up a large percentage of the image or video frame and it may struggle with small/distant faces.
https://learn.ml5js.org/#/reference/facemesh"><meta property="og:type" content="article"><meta property="og:url" content="https://jhsrojasro.github.io/showcase/docs/shortcodes/ml5/FaceMesh/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-04-17T17:08:43-05:00"><title>Face Mesh | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.1ee0594baa10549c0d2dfed73539a8473fb6d77e03cf227cf7be0f5224a6f24e.js integrity="sha256-HuBZS6oQVJwNLf7XNTmoRz+2134DzyJ8974PUiSm8k4=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/showcase/docs/shortcodes/integrantes/>Integrantes</a></li><li><a href=/showcase/docs/shortcodes/logs/>Logs</a></li><li><input type=checkbox id=section-317ff9256596583937fd0dc8b10b1dfa class=toggle checked>
<label for=section-317ff9256596583937fd0dc8b10b1dfa class="flex justify-between"><a role=button>Ml5</a></label><ul><li><a href=/showcase/docs/shortcodes/ml5/BodyPrix/>Body Prix</a></li><li><a href=/showcase/docs/shortcodes/ml5/FaceMesh/ class=active>Face Mesh</a></li><li><a href=/showcase/docs/shortcodes/ml5/HandPose/>Hand Pose</a></li><li><a href=/showcase/docs/shortcodes/ml5/image-classification/>Image Classification</a></li><li><a href=/showcase/docs/shortcodes/ml5/PoseNet/>Pose Net</a></li></ul></li><li><input type=checkbox id=section-ec67a64aba70b9df3d2a9acd6c92e3bc class=toggle>
<label for=section-ec67a64aba70b9df3d2a9acd6c92e3bc class="flex justify-between"><a href=/showcase/docs/shortcodes/p5/>P5</a></label><ul><li><a href=/showcase/docs/shortcodes/p5/div/>Div</a></li><li><a href=/showcase/docs/shortcodes/p5/iframe/>Iframe</a></li></ul></li><li><a href=/showcase/docs/shortcodes/workshop/>Workshop</a></li><li><a href=/showcase/docs/shortcodes/workshop2/>Workshop2</a></li><li><input type=checkbox id=section-699c85deb1d28081c80315a3708d5473 class=toggle>
<label for=section-699c85deb1d28081c80315a3708d5473 class="flex justify-between"><a role=button>Workshop2</a></label><ul><li><a href=/showcase/docs/shortcodes/workshop2/3dBrush/>3d Brush</a></li><li><a href=/showcase/docs/shortcodes/workshop2/softwareRendering/>Software Rendering</a></li></ul></li></ul></li></ul><ul><li><a href=/showcase/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Face Mesh</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#facemesh-with-webcam-demo>Facemesh with Webcam Demo</a></li></ul></li></ul></nav></aside></header><article class=markdown><h2 id=facemesh-with-webcam-demo>Facemesh with Webcam Demo
<a class=anchor href=#facemesh-with-webcam-demo>#</a></h2><p>Facemesh is a machine-learning model that allows for facial landmark detection in the browser. It can detect multiple faces at once and provides 486 3D facial landmarks that describe the geometry of each face. Facemesh works best when the faces in view take up a large percentage of the image or video frame and it may struggle with small/distant faces.</p><p><a href=https://learn.ml5js.org/#/reference/facemesh>https://learn.ml5js.org/#/reference/facemesh</a>
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
<script src=https://unpkg.com/ml5@latest/dist/ml5.min.js></script><div id=sketch-holder><script src=/showcase/sketches/faceMesh.js></script></div><div id=faceMesh></div></p><details><summary>CÃ³digo del sketch</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>facemesh</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>video</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>predictions</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>canvas</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>640</span>, <span style=color:#ae81ff>480</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>parent</span>(<span style=color:#e6db74>&#39;sketch-holder&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCapture</span>(<span style=color:#a6e22e>VIDEO</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>size</span>(<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>facemesh</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ml5</span>.<span style=color:#a6e22e>facemesh</span>(<span style=color:#a6e22e>video</span>, <span style=color:#a6e22e>modelReady</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// This sets up an event that fills the global variable &#34;predictions&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// with an array every time new predictions are made
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>facemesh</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#34;face&#34;</span>, <span style=color:#a6e22e>results</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>predictions</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>results</span>;
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Hide the video element, and just show the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>modelReady</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Model ready!&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>video</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// We call function to draw all keypoints
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>drawKeypoints</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// A function to draw ellipses over the detected keypoints
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawKeypoints</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>predictions</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>keypoints</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>predictions</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>scaledMesh</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Draw facial keypoints.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>keypoints</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>keypoints</span>[<span style=color:#a6e22e>j</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ellipse</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/61acad6a55fed2939c469616562da6de2c4a5239 title="Last modified by Sebastian Rojas | April 17, 2022" target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 17, 2022</span></a></div></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#facemesh-with-webcam-demo>Facemesh with Webcam Demo</a></li></ul></li></ul></nav></div></aside></main></body></html>